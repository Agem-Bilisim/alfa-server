<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head></head>
<body>
	<div th:fragment="scripts">
		<!-- jQuery3 -->
		<script th:src="@{/plugins/jquery/dist/jquery.min.js}"></script>
		<!-- Bootstrap 3.3.7 -->
		<script th:src="@{/plugins/bootstrap/dist/js/bootstrap.min.js}"></script>
		<!-- InputMask -->
 		<script th:src="@{/plugins/inputmask-min/inputmask/inputmask.min.js}"></script>
 		<script th:src="@{/plugins/inputmask-min/jquery.inputmask.bundle.min.js}"></script>
 		<script th:src="@{/plugins/inputmask-min/inputmask/inputmask.extensions.min.js}"></script>
 		<script th:src="@{/plugins/inputmask-min/inputmask/inputmask.numeric.extensions.min.js}"></script>
 		<script th:src="@{/plugins/inputmask-min/inputmask/inputmask.date.extensions.min.js}"></script>
 		<script th:src="@{/plugins/inputmask-min/inputmask/jquery.inputmask.min.js}"></script>
 		
 		<!-- date-range-picker -->
		<script th:src="@{/plugins/moment/min/moment.min.js}"></script>
		<script th:src="@{/plugins/bootstrap-daterangepicker/daterangepicker.js}"></script>
		<!-- bootstrap datepicker -->
		<script th:src="@{/plugins/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js}"></script>
		<!-- bootstrap color picker -->
		<script th:src="@{/plugins/bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js}"></script>
		<!-- bootstrap time picker -->
		<script th:src="@{/plugins/timepicker/bootstrap-timepicker.min.js}"></script>
		<!-- Pace -->
		<script th:src="@{/plugins/pace/pace.min.js}"></script>
		<!-- AlertifyJS -->
		<script th:src="@{/plugins/alertifyjs/alertify.min.js}"></script>
		<!-- DataTables -->
		<script th:src="@{/plugins/DataTables/datatables.min.js}"></script>
		<!-- ChartJS 2.7.2 -->
		<script th:src="@{/plugins/chartjs/Chart.min.js}"></script>
		<!-- SlimScroll -->
		<script th:src="@{/plugins/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
		<!-- iCheck 1.0.1 -->
		<script th:src="@{/plugins/iCheck/icheck.min.js}"></script>
		<!-- FastClick -->
		<script th:src="@{/plugins/fastclick/lib/fastclick.js}"></script>
		<!-- AdminLTE App -->
		<script th:src="@{/js/adminlte.min.js}"></script>
		<!-- EventSource polyfill for older browsers -->
		<script th:src="@{/js/EventSource.js}"></script>
		<!-- Storage polyfill for older browsers -->
		<script th:src="@{/js/Storage.js}"></script>
		<!-- SurveyJS v1.0.22 -->
		<script th:src="@{/plugins/knockout/knockout-min.js}"></script>
		<script th:src="@{/plugins/knockout/survey.ko.js}"></script>
		<script th:src="@{/plugins/ace/ace.min.js}"></script>
		<script th:src="@{/plugins/ace/ext-language_tools.js}"></script>
		<script th:src="@{/plugins/surveyjs/survey.jquery.min.js}"></script>
		<script th:src="@{/plugins/surveyjs/surveyeditor.min.js}"></script>
		<!-- Lider -->
		<script th:src="@{/js/alfa.js}"></script>
		
		<script>
		var checkTasks = function() {
			if ($(".tasks-menu a span").length > 0) {
				Alfa.ajax(
						{"url":"/alfa/bpm-task/list"},
						function(result) { //successHandler
							console.log(result);
					
							if (result && result.data) {
								$(".tasks-menu a span").html(result.data["tasks"].content.length);
								$(".tasks-menu .header").html(result.data["tasks"].content.length + " tane göreviniz var");
								
								$(".tasks-menu .menu li").html("<a href=\"/alfa/bpm-task/get/"+result.data["tasks"].content[0].taskId+"\" title=\""+result.data["tasks"].content[0].taskDescription+"\"><h3>" + result.data["tasks"].content[0].taskDescription +"</h3></a>" );
							}
						},
						function(jqXHR, textStatus, errorThrown) { // errorHandler
							console.log("Alfa: script.html : Görev bilgileri alınamadı.");
						}
					);
				setTimeout(function(){ checkTasks(); }, 60000);
			}
		}
		
		$(document).ready(function() {
			checkTasks();
		});
		
	</script> 
	</div>
</body>
</html>